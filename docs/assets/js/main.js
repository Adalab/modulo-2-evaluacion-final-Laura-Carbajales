"use strict";const btnSearch=document.querySelector(".js-search"),btnReset=document.querySelector(".js-reset"),inputSearch=document.querySelector(".js-input"),cardsSection=document.querySelector(".js-cardContainer"),favoriteSection=document.querySelector(".js-favouriteContainer");let favorites=[],results=[];function handleClickResults(e){e.preventDefault();const t=inputSearch.value;fetch("https://api.jikan.moe/v3/search/anime?q="+t).then(e=>e.json()).then(e=>{results=e.results,renderAllCards(results)})}function renderCard(e){let t="gray",r="gray";-1!==favorites.findIndex(t=>e.mal_id===parseInt(t.id))&&(t="favourite_border",r="favourite_color"),cardsSection.innerHTML+=`\n    <article class="results__container--card ${t} js-card" data-name="${e.title}" data-img="${e.image_url}" data-id="${e.mal_id}">\n    <img class="img"\n        src="${e.image_url||"https://via.placeholder.com/200x250/ffffff/666666/?text=img"}"\n        alt="caratula de la serie" />\n    <h3 class="name ${r} js-name">${e.title}</h3>\n</article>`}function renderAllCards(e){if(cardsSection.innerHTML="",void 0===e)cardsSection.innerHTML+='<p class="results__container--text">Ha ocurrido un error. No hemos encontrado resultados para tu búsqueda.</p>';else if(0===e.length)cardsSection.innerHTML+='<p class="results__container--text">No hay resultados para tu búsqueda.</p>';else{for(const t of e)renderCard(t);const t=document.querySelectorAll(".js-card");for(const e of t)e.addEventListener("click",handleClickCard)}}function handleClickResetResults(e){e.preventDefault(),inputSearch.value="",cardsSection.innerHTML="",results=[]}function handleClickCard(e){const t=e.currentTarget;t.classList.remove("gray"),t.classList.add("favourite_border"),t.querySelector(".js-name").classList.remove("gray"),t.querySelector(".js-name").classList.add("favourite_color");const r={name:t.dataset.name,url:t.dataset.img,id:t.dataset.id};-1===favorites.findIndex(e=>e.id===r.id)&&(favorites.push(r),renderAllFavorites(favorites))}function renderFavoriteCard(e){favoriteSection.innerHTML+=`<article class="favorites__container--card" data-id="${e.id}">\n  <img class="img"\n      src="${e.url}"\n      alt="caratula de la serie" />\n  <h3 class="title">${e.name}\n  </h3>\n  <button class="esc js-btnEsc"><i class="icon fas fa-times"></i></button>\n</article>\n    `}function renderAllFavorites(e){if(favoriteSection.innerHTML="",0===e.length)favoriteSection.innerHTML+='<p class="favorites__container--text">Aún no tienes ningún favorito añadido.</p>';else{for(const t of e)renderFavoriteCard(t);const t=document.querySelectorAll(".js-btnEsc");for(const e of t)e.addEventListener("click",handleClickBtnEsc)}}function handleClickBtnEsc(e){const t=e.currentTarget.parentNode,r=favorites.findIndex(e=>t.dataset.id===e.id);-1!==r&&(favorites.splice(r,1),renderAllFavorites(favorites),renderAllCards(results))}btnSearch.addEventListener("click",handleClickResults),btnReset.addEventListener("click",handleClickResetResults);